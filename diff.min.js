function diff(j,h,c){var e={},i=function(a,f,d,b){var g={},m=0,k=0,l=0,n={};for(a=a;a<f;a++){var o=e[j[a]],r;for(r in e[j[a]]){var p=o[r];if(d<=p&&p<b){var q=n[p]=(g[p-1]||0)+1;if(q>=c&&q>l){m=a;k=p;l=q}}}g=n;n={}}return[m-l+1,k-l+1,l]},s=function(){for(var a=[[0,0,0],[j.length,h.length,0]],f=[[0,j.length,0,h.length]];f.length>0;){var d=f.pop(),b=i.apply(this,d),g=b[0],m=b[1],k=b[2];if(k>=c){a.push(b);f.push([d[0],g,d[2],m]);f.push([g+k,d[1],m+k,d[3]])}}a.sort(function(l,n){for(var o in[0,1,2]){if(l[o]<n[o])return-1;if(l[o]>n[o])return 1}return 0});return a};(function(){c=c||3;for(var a=0;a<h.length;a++){h[a]in e||(e[h[a]]=[]);e[h[a]].push(a)}})();return function(){for(var a=[],f=s(),d=0;d<f.length-1;d++){var b=f[d],g=f[d+1],m=g[0]-b[0]-b[2],k=g[1]-b[1]-b[2];b[0]+b[2]>0&&a.push({op:" ",text:j.substring(b[0],b[0]+b[2])});m>0&&a.push({op:"-",text:j.substring(b[0]+b[2],g[0])});k>0&&a.push({op:"+",text:h.substring(b[1]+b[2],g[1])})}return a}()}function html_diff(j,h){var c=diff(j,h),e="",i;for(i in c)if(c[i].op==" ")e+=c[i].text;else if(c[i].op=="-")e+="<del>"+c[i].text+"</del>";else if(c[i].op=="+")e+="<ins>"+c[i].text+"</ins>";return e};
